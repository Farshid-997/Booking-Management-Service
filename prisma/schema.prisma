
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User{
  id         String    @id @default (uuid())
  name       String 
  email      String    @unique
  password   String
  role       Role?      @default(customer)
  contactNo  String
  address    String
  profileImg String
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @updatedAt
  reviewandratings     ReviewandRating[]
  orders      Order[]
  @@map("user")
}

model Category{
  id         String    @id @default (uuid())
  title      String 
  createdAt DateTime? @default(now())
  updatedAt DateTime? @updatedAt
  books      Book[]
  @@map("category")
 

}

model Book{
  id         String    @id @default (uuid())
  title      String 
  author     String
  price      Float
  genre      String
  publicationDate String
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @updatedAt
  categoryId String
  category Category @relation(fields:[categoryId],references: [id])

 
  
  ReviewAndRating ReviewandRating[]

  @@map("book")
}
model ReviewandRating{
  id         String    @id @default (uuid())
  review     String
  rating     String
  userId     String 
  bookId String
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @updatedAt
  
  user User @relation(fields: [userId],references:[id])
  book Book @relation(fields: [bookId], references: [id])
 
 
}

model Order{
   id         String    @id @default (uuid())
   status Status @default(pending)
   orderedBooks  Json 
   userId String 
   createdAt  DateTime   @default(now())
   updatedAt  DateTime   @updatedAt
   user User @relation(fields: [userId],references:[id])

   @@map("order")
}



enum Role{
  admin
  customer
}
enum  Status{
  pending
  shipped
  delivered
}